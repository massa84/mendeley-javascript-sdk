!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.MendeleySDK=t():e.MendeleySDK=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports={API:n(1),Auth:n(16),Request:n(3),Notifier:n(17)}},function(e,t,n){var r;r=function(e){"use strict";var t=n(2);return{setAuthFlow:t.setAuthFlow,setBaseUrl:t.setBaseUrl,setNotifier:t.setNotifier,annotations:n(4)(),catalog:n(5)(),documents:n(6)(),files:n(7)(),folders:n(8)(),followers:n(9)(),groups:n(10)(),institutions:n(11)(),locations:n(12)(),metadata:n(13)(),profiles:n(14)(),trash:n(15)()}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,i;r=[n(3)],i=function(e){"use strict";function t(e){v=e}function n(e){g=e}function r(e){m=e}function i(t,n,r,i){return r=r||[],function(){var s=Array.prototype.slice.call(arguments,0),o=l(n,r,s),a=s[r.length],u={type:t,dataType:"json",url:o,headers:d(i),data:a},c={authFlow:v};"GET"===t&&(c.maxRetries=1);var f=e.create(u,c,m).send();return f.done(function(e,t){p.call(this,t)}.bind(this)),f}}function s(t){return function(){if(!this.paginationLinks[t])return(new $.Deferred).reject();var n={type:"GET",dataType:"json",url:this.paginationLinks[t],headers:d({})},r={authFlow:v,maxRetries:1},i=e.create(n,r,m).send();return i.done(function(e,t){p.call(this,t)}.bind(this)),i}}function o(t,n,r,i,s){return r=r||[],function(){var o=Array.prototype.slice.call(arguments,0),a=l(n,r,o),u=o[r.length],c={type:t,url:a,headers:d(i,u),data:JSON.stringify(u),processData:!1},f={authFlow:v,followLocation:s};return e.create(c,f,m).send()}}function a(t,n,r){return function(){var i=Array.prototype.slice.call(arguments,0),s=l(n,[],i),o=i[0],a=i[1],u={type:t,url:s,headers:d(c(o,a,r),t),data:o,processData:!1},f={authFlow:v,fileUpload:!0};return e.create(u,f,m).send()}}function u(e){return encodeURIComponent(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function c(e,t,n){var r={"Content-Type":e.type?e.type:"application/octet-stream","Content-Disposition":"attachment; filename*=UTF-8''"+u(e.name)};if(n&&t)switch(n){case"group":r.Link="<"+g+"/groups/"+t+'>; rel="group"';break;case"document":r.Link="<"+g+"/documents/"+t+'>; rel="document"'}return r}function l(e,t,n){if(!t.length)return g+e;var r={};return t.forEach(function(e,t){r[e]=n[t]}),g+f(e,r)}function d(e,t){for(var n in e){var r=e[n];"function"==typeof r&&(e[n]=r(t))}return e}function f(e,t){var n=e.match(/\{[a-z]+\}/gi);return n.forEach(function(n){var r=n.replace(/[\{\}]/g,"");if(!t.hasOwnProperty(r))throw new Error("Endpoint requires "+r);e=e.replace(n,t[r])}),e}function p(e){if(e.hasOwnProperty("Mendeley-Count")&&(this.count=parseInt(e["Mendeley-Count"],10)),e.hasOwnProperty("Link")&&"object"==typeof e.Link)for(var t in this.paginationLinks)this.paginationLinks[t]=e.Link.hasOwnProperty(t)?e.Link[t]:!1}function h(){this.paginationLinks={last:!1,next:!1,previous:!1},this.count=0}var g="https://api.mendeley.com",v=!1,m=!1;return{setAuthFlow:t,setBaseUrl:n,setNotifier:r,requestFun:i,requestPageFun:s,requestWithDataFun:o,requestWithFileFun:a,resetPaginationLinks:h}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r;r=function(){"use strict";function e(e,n,r){return new t(e,$.extend({},d,n),r)}function t(e,t,n){if(!t.authFlow)throw new Error("Please provide an authentication interface");this.request=e,this.settings=t,this.retries=0,this.authRetries=0,this.notifier=n||f,this.notifier.notify("startInfo",[this.request.type,this.request.url],this.request)}function n(e,t){e=e||$.Deferred(),t=t||this.request,t.headers=t.headers||{};var n=this.settings.authFlow.getToken();if(!n)return this.authRetries++,this.notifier.notify("authWarning",["n.a.",this.authRetries,this.settings.maxAuthRetries],this.request),s.call(this,e),e.promise();if(t.headers.Authorization="Bearer "+n,this.settings.fileUpload){var a=$.ajaxSettings.xhr();t.xhr=function(){return a},t.dataType="text",["loadstart","loadend","load","progress","abort","error","timeout"].forEach(function(n){a.upload.addEventListener(n,o.call(this,e,t,a))}.bind(this))}return $.ajax(t).fail(r.bind(this,e)).done(i.bind(this,e)),e.promise()}function r(e,t){switch(t.status){case 0:case 504:this.retries<this.settings.maxRetries?(this.retries++,this.notifier.notify("commWarning",[t.status,this.retries,this.settings.maxRetries],this.request,t),this.send(e)):(this.notifier.notify("commError",[t.status,this.settings.maxRetries],this.request,t),e.reject(this.request,t));break;case 401:this.authRetries<this.settings.maxAuthRetries?(this.authRetries++,this.notifier.notify("authWarning",[t.status,this.authRetries,this.settings.maxAuthRetries],this.request,t),s.call(this,e,t)):(this.notifier.notify("authError",[t.status,this.settings.maxAuthRetries],this.request,t),e.reject(this.request,t),this.settings.authFlow.authenticate(200));break;default:this.notifier.notify("reqError",[t.status],this.request,t),e.reject(this.request,t)}}function i(e,t,n,r){var i,s=a(r,"Location");if(s&&this.settings.followLocation&&201===r.status){var o={type:"GET",url:s,dataType:"json"};this.notifier.notify("redirectInfo",null,this.request,o),this.send(e,o)}else if(this.settings.extractHeaders&&(i=c.call(this,r)),this.settings.fileUpload){if(t)try{t=JSON.parse(t)}catch(u){return this.notifier.notify("parseError",null,this.request,r),void e.reject(u)}this.notifier.notify("uploadSuccessInfo",null,this.request,t),e.resolve(t,r)}else this.notifier.notify("successInfo",null,this.request,t),e.resolve(t,i)}function s(e,t){var n=this.settings.authFlow.refreshToken();n?$.when(n).done(function(){this.send(e)}.bind(this)).fail(function(n){this.notifier.notify("refreshError",[n.status],this.request,n),e.reject(this.request,t),this.settings.authFlow.authenticate(200)}.bind(this)):(this.notifier.notify("refreshNotConfigured",[]),e.reject(this.request,t),this.settings.authFlow.authenticate(200))}function o(e,t,n){var r,i,s;return function(o){var a=o.type;o.lengthComputable&&(s=o.loaded||o.position,i=o.total,r=Math.round(100*s/i),e.notify(o,r,s,i),"progress"===a&&this.notifier.notify("uploadProgressInfo",[r,s,i],t,n)),("abort"===a||"timeout"===a||"error"===a)&&(this.notifier.notify("uploadError",[a,r],t,n),e.reject(t,n,{event:o,percent:r}))}.bind(this)}function a(e,t){return e&&e.getResponseHeader?e.getResponseHeader(t):""}function u(e){return e&&e.getAllResponseHeaders?e.getAllResponseHeaders():""}function c(e){var t,n={};return this.settings.extractHeaders.forEach(function(r){t="Link"===r?l.call(this,e):a(e,r),t&&(n[r]=t)}),n}function l(e){var t="Link",n=u(e).split("\n").filter(function(e){return e.match(new RegExp("^"+t+":.*"))}).map(function(e){return e.trim().substr(t.length+1)}).join(",");if(!n)return!1;for(var r,i,s,o=n.split(","),a={},c=0,l=o.length;l>c;c++)r=o[c].split(";"),i=r[0].replace(/[<>]/g,"").trim(),s=r[1].trim().split("=")[1].replace(/"/g,""),a[s]=i;return a}var d={authFlow:!1,maxRetries:0,maxAuthRetries:1,followLocation:!1,fileUpload:!1,extractHeaders:["Mendeley-Count","Link"]},f={notify:function(){}};return t.prototype={send:n},{create:e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={annotation:{"Content-Type":"application/vnd.mendeley-annotation.1+json"}};return{retrieve:e.requestFun("GET","/annotations/{id}",["id"]),patch:e.requestWithDataFun("PATCH","/annotations/{id}",["id"],t.annotation,!0),create:e.requestWithDataFun("POST","/annotations/",[],t.annotation,!0),"delete":e.requestFun("DELETE","/annotations/{id}",["id"]),list:e.requestFun("GET","/annotations/"),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){return{search:e.requestFun("GET","/catalog"),retrieve:e.requestFun("GET","/catalog/{id}",["id"])}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={"Content-Type":"application/vnd.mendeley-document.1+json"},n={"Content-Type":"application/vnd.mendeley-document-clone.1+json"},r=e.requestFun("GET","/documents/"),i=e.requestFun("GET","/folders/{id}/documents",["id"]);return{create:e.requestWithDataFun("POST","/documents",!1,t,!0),createFromFile:e.requestWithFileFun("POST","/documents"),createFromFileInGroup:e.requestWithFileFun("POST","/documents","group"),retrieve:e.requestFun("GET","/documents/{id}",["id"]),update:e.requestWithDataFun("PATCH","/documents/{id}",["id"],t,!0),clone:e.requestWithDataFun("POST","/documents/{id}/actions/cloneTo",["id"],n,!0),list:function(e){if(e&&"undefined"!=typeof e.folderId){var t=e.folderId,n={limit:e.limit};return delete e.folderId,i.call(this,t,n)}return r.call(this,e)},search:e.requestFun("GET","/search/documents"),trash:e.requestFun("POST","/documents/{id}/trash",["id"],t),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={Accept:"application/vnd.mendeley-file.1+json"};return{create:e.requestWithFileFun("POST","/files","document"),list:e.requestFun("GET","/files?document_id={id}",["id"],t),remove:e.requestFun("DELETE","/files/{id}",["id"])}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={folder:{"Content-Type":"application/vnd.mendeley-folder.1+json"},document:{"Content-Type":"application/vnd.mendeley-document.1+json"}};return{create:e.requestWithDataFun("POST","/folders",[],t.folder,!0),retrieve:e.requestFun("GET","/folders/{id}",["id"]),update:e.requestWithDataFun("PATCH","/folders/{id}",["id"],t.folder,!0),"delete":e.requestFun("DELETE","/folders/{id}",["id"]),removeDocument:e.requestFun("DELETE","/folders/{id}/documents/{docId}",["id","docId"],t.folder),addDocument:e.requestWithDataFun("POST","/folders/{id}/documents",["id"],t.document,!1),list:e.requestFun("GET","/folders/"),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={"Content-Type":"application/vnd.mendeley-follow-request.1+json"};return{list:e.requestFun("GET","/followers"),create:e.requestWithDataFun("POST","/followers",!1,t,!1),remove:e.requestFun("DELETE","/followers/{id}",["id"])}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){return{retrieve:e.requestFun("GET","/groups/{id}",["id"]),list:e.requestFun("GET","/groups/"),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){return{search:e.requestFun("GET","/institutions"),retrieve:e.requestFun("GET","/institutions/{id}",["id"])}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){return{search:e.requestFun("GET","/locations"),retrieve:e.requestFun("GET","/locations/{id}",["id"])}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={Accept:"application/vnd.mendeley-document-lookup.1+json"};return{retrieve:e.requestFun("GET","/metadata",!1,t,!1)}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){var t={"Content-Type":"application/vnd.mendeley-profile-amendment.1+json"};return{me:e.requestFun("GET","/profiles/me"),update:e.requestWithDataFun("PATCH","/profiles/me",[],t,!0)}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";return function(){return{retrieve:e.requestFun("GET","/trash/{id}",["id"]),list:e.requestFun("GET","/trash/"),restore:e.requestFun("POST","/trash/{id}/restore",["id"]),destroy:e.requestFun("DELETE","/trash/{id}",["id"]),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r;r=function(){"use strict";function e(e){if(f=$.extend({},c,l,e||{}),!f.clientId)return console.error("You must provide a clientId for implicit grant flow"),!1;if(!f.redirectUrl){var t=f.win.location;f.redirectUrl=t.protocol+"//"+t.host+t.pathname}return f.apiAuthenticateUrl=f.apiAuthenticateUrl+"?client_id="+f.clientId+"&redirect_uri="+f.redirectUrl+"&scope="+f.scope+"&response_type=token",f.authenticateOnStart&&!i()&&r(),{authenticate:r,getToken:i,refreshToken:n()}}function t(e){return f=$.extend({},c,d,e||{}),f.apiAuthenticateUrl?(f.authenticateOnStart&&!s()&&r(),{authenticate:r,getToken:s,refreshToken:u}):(console.error("You must provide an apiAuthenticateUrl for auth code flow"),!1)}function n(){return function(){return!1}}function r(){var e="function"==typeof f.apiAuthenticateUrl?f.apiAuthenticateUrl():f.apiAuthenticateUrl;a(),f.win.location=e}function i(){var e=f.win.location,t=e.hash?e.hash.split("=")[1]:"",n=s();return t&&!n?(o(t),t):!t&&n?n:t&&n?t!==n?(o(t),t):n:""}function s(){for(var e=f.accessTokenCookieName+"=",t=f.win.document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf(e))return r.substring(e.length,r.length)}return""}function o(e,t){var n=new Date;n.setTime(n.getTime()+60*(t||1)*60*1e3);var r="expires="+n.toUTCString();f.win.document.cookie=f.accessTokenCookieName+"="+e+"; "+r}function a(){o("",-1)}function u(){return f.refreshAccessTokenUrl?$.get(f.refreshAccessTokenUrl):!1}var c={win:window,authenticateOnStart:!0,apiAuthenticateUrl:"https://api.mendeley.com/oauth/authorize",accessTokenCookieName:"accessToken",scope:"all"},l={clientId:!1,redirectUrl:!1},d={apiAuthenticateUrl:"/login",refreshAccessTokenUrl:!1},f={};return{implicitGrantFlow:e,authCodeFlow:t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";function e(e,t,n,i){var s=$.extend({},r[e]||{});return t&&(s.message=s.message.replace(/\$(\d+)/g,function(e,n){return""+(void 0!==t[+n]?t[+n]:"")})),n&&(s.request=n),i&&(s.response=i),s}function t(t,r){if(!t||"function"!=typeof t)return!1;var i=n[r]||0;return{notify:function(n,r,s,o){var a=e(n,r,s,o);a.code>i&&t(a)}}}var n={debug:0,info:1e3,warn:2e3,error:3e3},r={startInfo:{code:1001,level:"info",message:"Request Start : $0 $1"},redirectInfo:{code:1002,level:"info",message:"Redirection followed"},successInfo:{code:1003,level:"info",message:"Request Success"},uploadProgressInfo:{code:1004,level:"info",message:"Bytes $1 from $2 uploaded ($0%)"},uploadSuccessInfo:{code:1005,level:"info",message:"Upload Success"},commWarning:{code:2001,level:"warn",message:"Communication error (status code $0). Retrying ($1/$2)."},authWarning:{code:2002,level:"warn",message:"Authentication error (status code $0). Refreshing access token ($1/$2)."},reqError:{code:3001,level:"error",message:"Request error (status code $0)."},commError:{code:3002,level:"error",message:"Communication error (status code $0).  Maximun number of retries reached ($1)."},authError:{code:3003,level:"error",message:"Authentication error (status code $0).  Maximun number of retries reached ($1)."},refreshNotConfigured:{code:3004,level:"error",message:"Refresh token error. Refresh flow not configured."},refreshError:{code:3005,level:"error",message:"Refresh token error. Request failed (status code $0)."},tokenError:{code:3006,level:"error",message:"Missing access token."},parseError:{code:3007,level:"error",message:"JSON Parsing error."},uploadError:{code:3008,level:"error",message:"Upload $0 ($1 %)"}};return{createNotifier:t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}])});
//# sourceMappingURL=standalone.min.js.map